### 1. Что такое «Прототип» (Prototype)

**Прототип** — порождающий паттерн, который создаёт **новые объекты, клонируя существующие** вместо прямого вызова конструктора.  
Вместо `new Class()` мы говорим `prototype.clone()` и получаем копию, уже настроенную так, как надо.

`Клиент ──▶  имеющийся объект‑прототип  ──▶  clone()  ──▶  новый объект`

#### Зачем он нужен

|Боль|Как помогает Прототип|
|---|---|
|Конструктор тяжёлый: читает файл, обращается к БД|Один раз создаём прототип, потом быстро клонируем|
|Нужно порождать объекты, тип которых неизвестен на момент компиляции|Клонируем полученный в рантайме прототип|
|Требуется «снимок» сложного состояния|`clone()` возвращает копию со всеми вложенными структурами|

> Короткая аналогия: у вас есть шаблон‑формочка для печенья (прототип).  
> Вместо того чтобы каждый раз лепить тесто вручную, вы просто вырезаете новые фигурки той же формы.

#### Как строится

|Роль|Суть|
|---|---|
|**Prototype**|интерфейс/абстрактный класс с методом `clone()`|
|**ConcretePrototype**|реализует `clone()`, знает, как себя копировать (поверхностно/глубоко)|
|**Client**|хранит ссылку на готовый прототип, вызывает `clone()` при необходимости|

### 4. Нюансы, трюки и подводные камни

|Нюанс|Пояснение|
|---|---|
|**Глубокое vs поверхностное копирование**|`copy.copy` клонирует верхний уровень, вложенные объекты разделяются; `copy.deepcopy` рекурсивно копирует всё. Выбирайте по ситуации.|
|**Инициализация‑по‑умолчанию**|Прототип хранит «базовое» состояние; клоны можно модифицировать сразу после `clone()`.|
|**Сериализация**|Иногда удобнее клонировать через `pickle.loads(pickle.dumps(obj))` или JSON — даёт «чистую» копию между процессами.|
|**Immutable объекты**|Если продукт неизменяемый (`@dataclass(frozen=True)`), прототип может просто возвращать себя — безопасно.|
|**Комбинация с Factory Method**|Часто фабрика внутри себя хранит прототипы и выдаёт `clone()` — смесь паттернов.|

---

### 5. Когда НЕ использовать

- **Создание объекта дешёвое** — копия не даёт выигрыша.
    
- Объекты содержат **ресурсы, которые нельзя дублировать** (дескрипторы файлов, сокеты). Придётся писать сложный `clone()`.
    
- Нужна строгая контроль‑логика в конструкторе (валидация, DI) — клон её обходит.
    

---

### 6. Итого

**Прототип** — быстрый способ штамповать объекты, копируя готовый эталон.  
Он спасает, когда конструкторы тяжёлые, а вариаций много и создаются динамически.  
Подготовьте прототипы, положите их в реестр, зовите `clone()` — и ваш код избавится от громоздких `new`‑конструкций, станет быстрее и гибче.